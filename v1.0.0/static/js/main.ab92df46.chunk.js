/*! For license information please see main.ab92df46.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-native"]=this["webpackJsonpreact-native"]||[]).push([[0],{252:function(t,e,r){t.exports=r(284)},283:function(t,e,r){},284:function(t,e,r){"use strict";r.r(e);var n=r(345),a=r(0),i=r.n(a),o=r(51),c=r(41),s=(r(254),r(344)),l=r(332);function u(){return i.a.createElement(o.a,{style:{flexDirection:"row",padding:5,paddingHorizontal:10,alignItems:"center"}},i.a.createElement(s.a,{style:{height:40,width:180,marginHorizontal:5},source:{uri:"/logo.jpg"},resizeMode:"contain"}),i.a.createElement(l.a,null,"(version 2023-01-26 07:00)"),i.a.createElement(o.a,{style:{flex:1}}),i.a.createElement(s.a,{style:{height:40,width:40},source:{uri:"https://cdn-icons-png.flaticon.com/128/3177/3177440.png"}}))}var f=r(6),d=r(18),h=r(19),p=r(20),m=r(62),v=r(65),y=r(113);function g(t){return t?new Date(t).toISOString().replace("T"," ").slice(0,16):""}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"PT200H0M0S";return parseFloat(t.split("PT")[1].split("H")[0])}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"07:00:00";return Date.parse("1971-06-28T"+t)-Date.parse("1971-06-28T00:00:00")}function E(t){return new Date(t).toISOString().split(".")[0]}function b(t){return"id_"+t}function x(t,e){var r=document.createElement("a");r.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),r.setAttribute("download",t),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}function k(t){return t?Array.isArray(t)?t:[t]:[]}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};return t.forEach((function(t,n){return r[t]=e[n]})),r}var O=function(){function t(){Object(h.a)(this,t),this.dic={}}return Object(p.a)(t,[{key:"size",get:function(){return L(this.dic)}},{key:"list",get:function(){return Object.entries(this.dic).map((function(t){var e=Object(f.a)(t,2),r=e[0],n=e[1];return"".concat(r," (count: ").concat(n,")")}))}},{key:"add",value:function(t){t in this.dic||(this.dic[t]=0),this.dic[t]+=1}}]),t}();function L(t){return Object.keys(t).length}function S(t,e){var r=[];if(t.length>e)for(var n=Math.floor(t.length/e),a=0;a<e;a++)r.push(t[a*n]);else r=t;return r}var F=r(57);function T(t){return new Promise((function(e){var r=new FileReader;r.onload=function(t){var r=F.a(t.target.result,{type:"binary"}),n={};r.SheetNames.forEach((function(t){n[t]=F.b.sheet_to_json(r.Sheets[t],{})})),e(n)},r.readAsBinaryString(t)}))}function P(t){var e=t.book,r=t.filename,n=F.b.book_new();Object.entries(e).forEach((function(t){var e=Object(f.a)(t,2),r=e[0],a=e[1],i=F.b.json_to_sheet(Object.values(a));F.b.book_append_sheet(n,i,r)})),F.c(n,r)}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;return"string"===typeof e?e:t.includes("start")||t.includes("finish")?g(e):"number"===typeof e?t.includes("ratio")?e.toFixed(2):e.toFixed(0):null===e||!1===e?"":Array.isArray(e)&&e.length<3?JSON.stringify(e):"object"===typeof e?L(e):JSON.stringify(e)}function D(){D=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),c=new j(a||[]);return n(o,"_invoke",{value:E(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var f={};function d(){}function h(){}function p(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var g=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var a;n(this,"_invoke",{value:function(n,i){function o(){return new e((function(a,o){!function n(a,i,o,c){var s=u(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}(n,i,a,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=b(o,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function b(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var A=function(){function t(){Object(h.a)(this,t),this.errors=new O}return Object(p.a)(t,[{key:"read_from_file",value:function(){var t=Object(d.a)(D().mark((function t(){var e,r,n=this,a=arguments;return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:new File,this.filename=e.name,r=new FileReader,t.abrupt("return",new Promise((function(t){r.onload=function(e){var r=e.target.result.trim();n.parse_text(r),n.extract_data(),n.cons_data=n.make_constraints(),console.log(n.raw_data),console.log(n.data),console.log(n.cons_data),t(!0)},r.readAsText(e)})));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"parse_text",value:function(){}},{key:"extract_data",value:function(){}},{key:"merge_data",value:function(){}},{key:"export",value:function(){}},{key:"export_excel",value:function(t){for(var e,r=(e=t,JSON.parse(JSON.stringify(e))),n=r.tasks,a=r.rsrcs,i=r.clndrs,o=r.task_preds,c=r.task_rsrcs,s=0,l=[n,a,i,o,c];s<l.length;s++){var u=l[s];Object.values(u).forEach((function(t){Object.keys(t).forEach((function(e){t[e]=N(e,t[e])}))}))}P({book:{tasks:n,rsrcs:a,clndrs:i,task_preds:o,task_rsrcs:c},filename:this.filename.replace(".xml","_Frontline.xlsx").replace(".xer","_Frontline.xlsx")})}},{key:"make_constraints",value:function(){var t=this,e=[],r=[],n=[];return Object.values(this.data.tasks).forEach((function(r){var a=r.id,i=r.name,o=r.drtn_hr;e.push({id:a,name:i,drtn_hr:o,min_drtn_hr:null,max_drtn_hr:null}),Object.values(r.rsrcs).forEach((function(e){var r=e.id,a=e.t_id,o=e.r_id,c=e.units;n.push({id:r,t_id:a,r_id:o,t_name:i,r_name:t.data.rsrcs[o].name,units:c,min_units:null,max_units:null})}))})),Object.values(this.data.rsrcs).forEach((function(t){var e=t.id,n=t.name;r.push({id:e,name:n,max_units_per_day:null,cost_per_unit_hr:null})})),{tasks_cons:e,rsrcs_cons:r,task_rsrc_cons:n}}},{key:"export_constraints",value:function(){var t=this.filename.replace(".xml","_Frontline_Cons.xlsx").replace(".xer","_Frontline_Cons.xlsx");P({book:this.make_constraints(),filename:t})}},{key:"read_constraints",value:function(){var t=Object(d.a)(D().mark((function t(e){return D().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.cons_filename=e.name,t.next=3,T(e);case 3:this.cons_data=t.sent,console.log(this.cons_data);case 5:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),R=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){return Object(h.a)(this,r),e.apply(this,arguments)}return Object(p.a)(r,[{key:"parse_text",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=new y.XMLParser({ignoreAttributes:!1});this.raw_data=e.parse(t)}},{key:"extract_data",value:function(){var t=this,e={},r={},n={"id_-1":{id:"id_-1",name:"standard 5x(4+4)",week_hr_cnt:40}},a=this.raw_data.Project,i={};a.Tasks.Task.forEach((function(t){var e=b(t.UID),r=t.Summary,n=t.Name;i[e]={is_summary:r,name:n}})),a.Tasks.Task.forEach((function(r){var n=b(r.UID),a=r.Name,o=Date.parse(r.Start+"Z"),c=Date.parse(r.Finish+"Z"),s=_(r.Duration),l=Date.parse(r.ActualStart+"Z"),u=Date.parse(r.ActualFinish+"Z"),f=b(r.CalendarUID),d={};k(r.PredecessorLink).forEach((function(e){var r=b(e.PredecessorUID),o={0:"FF",1:"FS",2:"SF",3:"SS"}[e.Type],c=e.LinkLag/600,s=i[r];if(s.is_summary){var l="ignoring RELATIONSHIP between `".concat(s.name,"` and `").concat(a,"` because the former is a summary");t.errors.add(l)}else d[r]={id:n+"-"+r,t_id:n,p_id:r,type:o,lag_hr:c}})),i[n].is_summary||(e[n]={id:n,name:a,start:o,finish:c,drtn_hr:s,act_start:l,act_finish:u,preds:d,rsrcs:{},clndr_id:f})})),k(a.Resources.Resource).forEach((function(t){var e=b(t.UID),n=t.Name,a=["Material","Work","Cost"][t.Type];a={Work:"Labor",Material:"Material",Cost:"Cost"}[a],r[e]={id:e,name:n,type:a,dist:{}}})),a.Calendars.Calendar.forEach((function(t){var e=b(t.UID),r=t.Name,a=0;t.WeekDays&&t.WeekDays.WeekDay.forEach((function(t){var e;[null,"Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][t.DayType]&&k(null===(e=t.WorkingTimes)||void 0===e?void 0:e.WorkingTime).forEach((function(t){var e=(w(t.ToTime)-w(t.FromTime))/36e5;e<0&&(e+=24),a+=e}))})),n[e]={id:e,name:r,week_hr_cnt:a}})),a.Assignments.Assignment.forEach((function(n){if(n.Work){var a=b(n.UID),i=b(n.TaskUID),o=b(n.ResourceUID);if(r[o]){var c=_(n.Work),s=c/e[i].drtn_hr;e[i].rsrcs[o]={id:a,t_id:i,r_id:o,work_hr:c,units:s}}else t.errors.add("unknown resource `".concat(o,"` in resource assignment"))}})),this.data={tasks:e,rsrcs:r,clndrs:n}}},{key:"merge_data",value:function(t){var e=this.raw_data.Project;e.Tasks.Task.forEach((function(e){if(!e.Summary){var r=b(e.UID),n=t.tasks[r];e.Start=e.EarlyStart=e.LateStart=E(n.start_2),e.Finish=e.EarlyFinish=e.LateFinish=E(n.finish_2),e.Duration=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return"PT"+t+"H0M0S"}(n.drtn_hr_2),e.act_start&&e.act_finish&&(e.ActualDuration=e.Duration)}})),e.Assignments.Assignment.forEach((function(e){if(e.Work){var r=b(e.UID),n=t.task_rsrcs[r];n&&(e.PeekUnits=n.units_2)}}))}},{key:"export",value:function(){var t=new y.XMLBuilder({ignoreAttributes:!1}).build(this.raw_data);x(this.filename.replace(".xml","_Frontline.xml"),t)}}]),r}(A),C=r(11),I=function(t){Object(m.a)(r,t);var e=Object(v.a)(r);function r(){return Object(h.a)(this,r),e.apply(this,arguments)}return Object(p.a)(r,[{key:"parse_text",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r={tables:{}},n=[];e.split("\n").forEach((function(e){var a=e.split("\t").map((function(t){return t.trim()})),i=a[0],o=a.slice(1);switch(i){case"ERMHDR":r.header=o;break;case"%T":n=r.tables[a[1]]=[];break;case"%F":t=o;break;case"%R":n.push(j(t,o));break;case"%E":break;default:console.error(i)}})),this.raw_data=r}},{key:"extract_data",value:function(){var t=this,e={},r={},n={},a=this.raw_data.tables;a.TASK.forEach((function(t){var r=b(t.task_id),n=t.task_name,a=Date.parse(t.target_start_date+"Z"),i=Date.parse(t.target_end_date+"Z"),o=parseFloat(t.target_drtn_hr_cnt),c=Date.parse(t.act_start_date+"Z"),s=Date.parse(t.act_end_date+"Z"),l=b(t.clndr_id);e[r]={id:r,name:n,start:a,finish:i,drtn_hr:o,act_start:c,act_finish:s,preds:{},rsrcs:{},clndr_id:l}})),a.RSRC&&a.RSRC.forEach((function(t){var e=b(t.rsrc_id),n=t.rsrc_name,a=t.rsrc_type.slice(3);a={Labor:"Labor",Equip:"Equipment",Mat:"Material"}[a],r[e]={id:e,name:n,type:a,dist:{}}})),a.CALENDAR.forEach((function(t){var e=b(t.clndr_id),r=t.clndr_name,a=parseFloat(t.week_hr_cnt);n[e]={id:e,name:r,week_hr_cnt:a}})),a.TASKPRED.forEach((function(t){var r=b(t.task_pred_id),n=b(t.task_id),a=b(t.pred_task_id),i=t.pred_type.slice(3),o=parseFloat(t.lag_hr_cnt);e[n].preds[a]={id:r,t_id:n,p_id:a,type:i,lag_hr:o}})),a.TASKRSRC&&(a.TASKRSRC.forEach((function(r){var n=b(r.taskrsrc_id),a=b(r.task_id),i=b(r.rsrc_id),o=parseFloat(r.target_qty),c=o/e[a].drtn_hr;if(e[a].rsrcs[i])return t.errors.add("removed duplicate assignment between task `".concat(a,"` and resource `").concat(i,"`")),void(r.DELETE=!0);e[a].rsrcs[i]={id:n,t_id:a,r_id:i,work_hr:o,units:c}})),a.TASKRSRC=a.TASKRSRC.filter((function(t){return!t.DELETE}))),this.data={tasks:e,rsrcs:r,clndrs:n}}},{key:"merge_data",value:function(t){var e=this.raw_data.tables;e.TASK.forEach((function(e){var r=b(e.task_id),n=t.tasks[r];e.target_start_date=e.early_start_date=e.late_start_date=g(n.start_2),e.target_end_date=e.early_end_date=e.late_end_date=g(n.finish_2),e.target_drtn_hr_cnt=n.drtn_hr_2})),e.TASKRSRC&&e.TASKRSRC.forEach((function(e){var r=b(e.taskrsrc_id),n=t.task_rsrcs[r];e.target_qty_per_hr=n.units_2}))}},{key:"export",value:function(){var t=[];t.push(["ERMHDR"].concat(Object(C.a)(this.raw_data.header)).join("\t"));var e=this.raw_data.tables;Object.entries(e).forEach((function(e){var r=Object(f.a)(e,2),n=r[0],a=r[1];t.push(["%T",n].join("\t")),t.push(["%F"].concat(Object(C.a)(Object.keys(a[0]))).join("\t")),a.forEach((function(e){t.push(["%R"].concat(Object(C.a)(Object.values(e))).join("\t"))}))})),t.push("%E"),x(this.filename.replace(".xer","_Frontline.xer"),t.join("\n"))}}]),r}(A);function G(){G=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),c=new j(a||[]);return n(o,"_invoke",{value:E(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var f={};function d(){}function h(){}function p(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var g=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var a;n(this,"_invoke",{value:function(n,i){function o(){return new e((function(a,o){!function n(a,i,o,c){var s=u(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}(n,i,a,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=b(o,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function b(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var z=function(){function t(e){Object(h.a)(this,t),this.reader=e,this.sim_in={steps:"100",default_start:"2023-01-01",min_ratio:"0.5",max_ratio:"1.5",lr:"0.005"},this.loss_weights={drtn_day:100,rsrc_max:0,rsrc_std:0,loss_task:0,loss_rsrc:0,loss_task_rsrc:0},this.results=[]}return Object(p.a)(t,[{key:"init",value:function(){var t=this;return new Promise((function(e){var r="wss://engine.frontline-optimizer.com";console.log(r),t.ws=new WebSocket(r),t.ws.onopen=function(t){c.b.success("Optimization Engine connected!"),e()},t.ws.onclose=function(t){c.b.error("Optimization Engine disconnected!")},t.ws.onmessage=function(e){var r=JSON.parse(e.data.replace(/\bNaN\b/g,"null"));r.success&&c.b.success("Engine: "+r.success),r.error&&c.b.error("Engine: "+r.error),r.drtn_day&&(t.modify_output(r),t.results.push(r),t.results=[t.results[0]].concat(Object(C.a)(t.results.slice(1).sort((function(t,e){return e.loss_sum-t.loss_sum}))))),t.update()},t.ws.onerror=function(t){c.b.error("Optimization Engine connection error!")}}))}},{key:"modify_output",value:function(t){var e=0,r={},n={};Object.values(t.inp.tasks).forEach((function(t){t.drtn_hr_2=Math.round(t.drtn_hr_2),t.changed=t.drtn_hr!==t.drtn_hr_2,t.drtn_ratio=t.drtn_hr_2/t.drtn_hr,t.changed&&(e+=1),Object.values(t.rsrcs).forEach((function(t){r[t.id]=t})),Object.values(t.preds).forEach((function(t){n[t.id]=t}))})),Object.assign(t.inp,{task_preds:n,task_rsrcs:r}),t.num_changed=e,t.num_crt=t.crt_path.length}},{key:"debug_output",value:function(t){var e=t.inp,r=e.tasks,n=e.rsrcs,a=e.clndrs,i=e.task_preds,o=e.task_rsrcs;if(1===this.results.length){console.log(t);for(var c=0,s=[r,n,a,i,o];c<s.length;c++){var l=s[c];console.log(Object.values(l)[0])}}}},{key:"send",value:function(t){this.ws.send(JSON.stringify(t))}},{key:"stop",value:function(){var t=Object(d.a)(G().mark((function t(){return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.ws.close();case 1:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"optimize",value:function(){var t=Object(d.a)(G().mark((function t(){var e,r,n,a,i,o,c,s;return G().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ws.readyState===this.ws.OPEN){t.next=3;break}return t.next=3,this.init();case 3:this.results=[],e=this.reader.data,r=e.tasks,n=e.rsrcs,a=e.clndrs,i=this.reader.cons_data,o=i.tasks_cons,c=i.rsrcs_cons,s=i.task_rsrc_cons,o.forEach((function(t){r[t.id].drtn_hr_rng=[t.min_drtn_hr,t.max_drtn_hr]})),c.forEach((function(t){n[t.id].rng=[0,t.max_units_per_day]})),s.forEach((function(t){r[t.t_id].rsrcs[t.r_id].units_rng=[t.min_units,t.max_units]})),this.send({func:"optimize",tasks:r,rsrcs:n,clndrs:a,drtn_ratios:{},default_start:Date.parse(this.sim_in.default_start+"Z"),steps:parseInt(this.sim_in.steps),ratio_rng:[parseFloat(this.sim_in.min_ratio),parseFloat(this.sim_in.max_ratio)],lr:parseFloat(this.sim_in.lr),loss_weights:this.loss_weights});case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}();function M(){return i.a.createElement(o.a,{style:{width:"100%"}})}var W=r(347);function U(t){var e=t.on,r=t.children,n=t.bg,a=void 0===n?"slategray":n,o=t.c,c=void 0===o?"white":o,s=t.center;return i.a.createElement(W.a,{onPress:e,style:{alignSelf:s?"center":"flex-end"}},i.a.createElement(l.a,{style:{fontWeight:"bold",margin:5,backgroundColor:a,color:c,padding:5,paddingHorizontal:20,borderRadius:10}},r))}function H(t){var e=t.children,r=t.on;return i.a.createElement(W.a,{onPress:r,style:{alignSelf:"flex-end",margin:5}},i.a.createElement("span",{className:"material-symbols-outlined"},e))}function K(t){var e=t.tabs,r=Object(a.useState)(0),n=Object(f.a)(r,2),c=n[0],s=n[1],l=Object(a.useState)(!0),u=Object(f.a)(l,2),d=u[0],h=u[1];return i.a.createElement(o.a,{style:{flex:1,flexDirection:"row"}},i.a.createElement(o.a,null,i.a.createElement(H,{on:function(){return h(!d)}},d?"chevron_left":"chevron_right"),d&&e.map((function(t,r){return i.a.createElement(U,{key:r,on:function(){return s(r)},bg:"white",c:r===c?"blue":"slategray"},e[r].name)}))),i.a.createElement(o.a,{style:{flex:1}},e.map((function(t,r){return i.a.createElement(o.a,{key:r,style:{flex:1,display:r===c?"flex":"none",overflow:"scroll",flexDirection:"row",flexWrap:"wrap",alignItems:"flex-start"}},e[r].elm)}))))}function Z(t){var e=t.children,r=t.on;return i.a.createElement("label",null,e,i.a.createElement("input",{type:"file",hidden:!0,onChange:function(t){try{var e=t.target.files[0];t.target.value=null,r(e)}catch(t){c.b.error(t)}}}))}function J(t){var e=t.children;return i.a.createElement(o.a,{style:{margin:10,padding:10,backgroundColor:"ghostwhite",borderRadius:10}},e)}function Y(t){var e=t.children;return i.a.createElement(l.a,{style:{fontSize:20,fontWeight:"bold",color:"blue",marginBottom:5}},e)}function B(t){var e=t.on_file,r=t.reader;return i.a.createElement(J,null,i.a.createElement(Y,null,"Project Input"),i.a.createElement(Z,{on:e},i.a.createElement(U,null,"Upload P6 xer / MSP xml")),i.a.createElement(U,{on:function(){fetch("/demo_project.xml").then((function(t){return t.blob()})).then((function(t){var r=new File([t],"demo_project.xml");e(r)}))}},"Use Demo Project"),i.a.createElement(l.a,null,null===r||void 0===r?void 0:r.filename))}function q(){q=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),c=new j(a||[]);return n(o,"_invoke",{value:E(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var f={};function d(){}function h(){}function p(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var g=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var a;n(this,"_invoke",{value:function(n,i){function o(){return new e((function(a,o){!function n(a,i,o,c){var s=u(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}(n,i,a,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=b(o,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function b(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function X(t){var e=t.reader,r=t.update;return(null===e||void 0===e?void 0:e.data)?i.a.createElement(J,null,i.a.createElement(Y,null,"Optimization Constraints"),i.a.createElement(U,{on:function(){e.export_constraints()}},"Download Constraints Form"),i.a.createElement(Z,{on:function(){var t=Object(d.a)(q().mark((function t(n){return q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.read_constraints(n);case 2:r();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},i.a.createElement(U,null,"Upload Filled Form")),i.a.createElement(l.a,null,null===e||void 0===e?void 0:e.cons_filename)):null}var Q=r(114),V=r(348),$=r(156),tt=r.n($);r(276);function et(t){var e=t.children,r=Object(a.useRef)();return Object(a.useEffect)((function(){tt.a.preview(r.current,e)}),[e]),i.a.createElement("div",{ref:r})}function rt(t){var e=t.fields,r=t.values,n=t.update;return i.a.createElement("table",null,i.a.createElement("tbody",null,Object.keys(e).map((function(t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement(et,null,e[t])),i.a.createElement("td",null,i.a.createElement(V.a,{value:r[t],onChangeText:function(e){r[t]=e,n()},style:{outline:"none",paddingLeft:10,color:"blue"}})))}))))}var nt=r(24),at=r(343);function it(t){var e=t.fields,r=t.values,n=t.update,a=nt.i(Object.values(r));return i.a.createElement("table",null,i.a.createElement("tbody",null,Object.keys(e).map((function(t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement(et,null,e[t])),i.a.createElement("td",{style:{width:300,paddingInline:20}},i.a.createElement(at.a,{value:r[t],onChange:function(e,a){r[t]=a,n()}})),i.a.createElement("td",null,r[t]),i.a.createElement("td",null,"(",(r[t]/a*100).toFixed(0),"%)"))}))))}var ot={steps:"optimization steps",lr:"[learning rate](https://en.wikipedia.org/wiki/Learning_rate)",default_start:"default start",min_ratio:"min(new_duration / old_duration)",max_ratio:"max(new_duration / old_duration)"},ct={drtn_day:"project duration (days)",rsrc_max:"labor resource maximum (units)",rsrc_std:"labor resource [standard deviation](https://en.wikipedia.org/wiki/Standard_deviation) (units)",loss_task:"loss from task constraints (hours)",loss_rsrc:"loss from resource constraints (units)",loss_task_rsrc:"loss from task-resource constraints (units)"},st=Object(Q.a)(Object(Q.a)({},ct),{num_changed:"changed tasks",num_crt:"[critical path](https://en.wikipedia.org/wiki/Critical_path_method) tasks",loss_sum:"[loss function](https://en.wikipedia.org/wiki/Loss_function) (dimensionless)"});function lt(t){var e=t.optimizer,r=t.update;return e?i.a.createElement(i.a.Fragment,null,i.a.createElement(J,null,i.a.createElement(Y,null,"Optimization Settings"),i.a.createElement(rt,{fields:ot,values:e.sim_in,update:r})),i.a.createElement(J,null,i.a.createElement(Y,null,"Loss Function Mixer"),i.a.createElement(et,null,"**The following properties ([loss components](https://en.wikipedia.org/wiki/Loss_function)) will be minimized. \nBut there will be [tradeoffs](https://en.wikipedia.org/wiki/Trade-off). Adjust their importance below:**"),i.a.createElement(it,{fields:ct,values:e.loss_weights,update:r}))):null}function ut(t){var e=t.reader;return(null===e||void 0===e?void 0:e.errors.size)?i.a.createElement(J,null,i.a.createElement(Y,null,"Error Messages"),i.a.createElement(et,null,e.errors.list.sort().join("\n"))):null}function ft(t){var e=t.optimizer,r=t.on_select;return e?i.a.createElement(o.a,{style:{flexDirection:"row",justifyContent:"center"}},i.a.createElement(U,{on:function(){e.update=function(){r(e.results.length-1)},e.optimize()}},"Optimize"),i.a.createElement(U,{on:function(){return e.stop()}},"Stop")):null}function dt(t){var e=t.margin,r=void 0===e?40:e,n=t.x_domain,a=t.y_domain,i=t.width,o=t.height,c=t.ref,s=t.x_label,l=t.y_label,u=t.x_type,f=void 0===u?nt.f:u,d=t.y_type,h=void 0===d?nt.f:d,p=r,m=i-r,v=r,y=o-r,g=f(n,[p,m]),_=h(a,[y,v]),w=nt.h(c.current).attr("width",i).attr("height",o);return w.selectChildren().remove(),w.append("g").call(nt.a(g)).attr("transform","translate(0, ".concat(y,")")).call((function(t){t.append("text").attr("x",m/2).attr("y",30).attr("fill","blue").attr("font-size",14).text(s)})),w.append("g").call(nt.d(g)).attr("transform","translate(0, ".concat(v,")")),w.append("g").call(nt.b(_)).attr("transform","translate(".concat(p,", 0)")).call((function(t){t.append("text").attr("x",-y/2).attr("y",14-r).attr("fill","blue").attr("font-size",14).text(l).attr("transform","rotate(-90)")})),w.append("g").call(nt.c(_)).attr("transform","translate(".concat(m,", 0)")),{svg:w,x_scale:g,y_scale:_}}function ht(t){var e=t.title,r=t.dist,n=t.width,o=void 0===n?600:n,c=t.height,s=void 0===c?400:c,u=t.margin,f=void 0===u?40:u,d=t.keep,h=void 0===d?1e3:d,p=Object(a.useRef)();if(Object(a.useEffect)((function(){if(r){var t=S(Object.entries(r),h),e=nt.e(Object.keys(r)),n=nt.e(Object.values(r)),a=dt({margin:f,x_domain:e,y_domain:n,width:o,height:s,ref:p,x_label:"time",y_label:"units",x_type:nt.g,y_type:nt.f}),i=a.svg,c=a.x_scale,l=a.y_scale;i.append("g").selectAll("rect").data(t).join("rect").attr("x",(function(t){return c(t[0])})).attr("width",c(864e5)-c(0)).attr("y",(function(t){return l(t[1])})).attr("height",(function(t){return l(n[0])-l(t[1])})).attr("fill","blue")}}),[r]),!r)return null;var m=L(r)>h?"(showing ".concat(h,"/").concat(L(r)," only due to limited pixels)"):"";return i.a.createElement(J,null,i.a.createElement(Y,null,e),i.a.createElement(l.a,null,m),i.a.createElement("svg",{ref:p}))}function pt(t){var e=t.title,r=t.tasks,n=t.width,o=void 0===n?600:n,c=t.height,s=void 0===c?400:c,u=t.keep,f=void 0===u?1e3:u,d=Object(a.useRef)();if(Object(a.useEffect)((function(){if(r&&L(r)){var t=Object.values(r).sort((function(t,e){return t.start_2-e.start_2})),e=dt({margin:40,x_domain:[Math.min.apply(Math,Object(C.a)(t.map((function(t){return t.start_2})))),Math.max.apply(Math,Object(C.a)(t.map((function(t){return t.finish_2}))))],y_domain:[(t=S(t,f)).length,0],width:o,height:s,ref:d,x_label:"time",y_label:"task",x_type:nt.g,y_type:nt.f}),n=e.svg,a=e.x_scale,i=e.y_scale;n.append("g").selectAll("rect").data(t).join("rect").attr("x",(function(t){return a(t.start_2)})).attr("y",(function(t,e){return i(e)})).attr("width",(function(t){return Math.max(a(t.finish_2)-a(t.start_2),0)})).attr("height",i(1)-i(0)).attr("fill",(function(t){return t.critical?"red":"blue"}))}}),[r]),!r||!L(r))return null;var h=L(r)>f?"(showing ".concat(f,"/").concat(L(r)," only due to limited pixels)"):"";return i.a.createElement(J,null,i.a.createElement(Y,null,e),i.a.createElement(l.a,null,h),i.a.createElement("svg",{ref:d}))}function mt(t){var e=t.base,r=t.out;return i.a.createElement(i.a.Fragment,null,i.a.createElement(pt,{tasks:null===r||void 0===r?void 0:r.inp.tasks,title:"Tasks"}),i.a.createElement(ht,{dist:null===r||void 0===r?void 0:r.rsrc_dist,title:"Combined labor resource"}),i.a.createElement(pt,{tasks:null===e||void 0===e?void 0:e.inp.tasks,title:"Tasks (original design)"}),i.a.createElement(ht,{dist:null===e||void 0===e?void 0:e.rsrc_dist,title:"Combined labor resource (original design)"}))}function vt(t){var e=t.out;return i.a.createElement(i.a.Fragment,null,Object.values((null===e||void 0===e?void 0:e.inp.rsrcs)||{}).map((function(t){return i.a.createElement(ht,{key:t.id,dist:t.dist,title:"(".concat(t.type,") ").concat(t.name)})})))}function yt(t){var e=t.results,r=void 0===e?[]:e,n=t.res_idx,o=t.on_select,c=t.width,s=void 0===c?600:c,u=t.height,f=void 0===u?400:u,d=t.k,h=t.y_label,p=Object(a.useRef)();return Object(a.useEffect)((function(){if(!(null===r||void 0===r?void 0:r.length))return null;r.forEach((function(t,e){return t.idx=e}));var t=dt({margin:50,x_domain:nt.e(r.map((function(t){return t.idx}))),y_domain:nt.e(r.map((function(t){return t[d]}))),width:s,height:f,ref:p,x_label:"optimization iteration",y_label:"(same as title)",x_type:nt.f,y_type:nt.f}),e=t.svg,a=t.x_scale,i=t.y_scale;e.append("g").selectAll("circle").data(r).join("circle").attr("cx",(function(t){return a(t.idx)})).attr("cy",(function(t){return i(t[d])})).attr("r",(function(t){return t.idx===n?5:3})).attr("fill",(function(t){return t.loss_task+t.loss_rsrc+t.loss_task_rsrc>0?"gray":t.idx===n?"red":"blue"})).on("click",(function(t,e){return o(e.idx)}))}),[r,n]),(null===r||void 0===r?void 0:r.length)?i.a.createElement(J,null,i.a.createElement(et,null,h),i.a.createElement(l.a,null,"Gray: constraints violated. Red: selected. Blue: constraints satisfied."),i.a.createElement("svg",{ref:p})):null}function gt(t){var e=t.optimizer,r=t.res_idx,n=t.on_select;return i.a.createElement(i.a.Fragment,null,Object.keys(st).map((function(t){return i.a.createElement(yt,{key:t,results:null===e||void 0===e?void 0:e.results,res_idx:r,on_select:n,k:t,y_label:"## "+st[t]})})))}var _t=r(342);function wt(t){var e=t.rows,r=t.title,n=t.keys,a=t.get_width,o=t.format,c=t.children;return i.a.createElement(J,null,i.a.createElement(Y,null,r),c,i.a.createElement("div",{style:{height:600,width:1200}},i.a.createElement(_t.a,{rows:e,columns:n.map((function(t){return{field:t,headerName:t,width:a(t),valueFormatter:function(t){return o(t.field,t.value)}}}))})))}var Et,bt,xt,kt={id:"",name:"",drtn_hr:"",drtn_hr_rng:"",drtn_hr_2:"",drtn_ratio:""},jt={id:"",name:"",start:"original start date",finish:"original finish date",drtn_hr:"original duration (hours)",drtn_hr_rng:"constraint: [min_drtn_hr, max_drtn_hr]",act_start:"actual start date",act_finish:"actual finish date",optimizable:"",start_2:"new start date",finish_2:"new finish date",drtn_hr_2:"new duration (actual start / finish dates considered)",changed:"",drtn_ratio:"duration ratio (new_duration / old_duration)",critical:"",crt_pred_id:"critical predecessor id",preds:"task-task (predecessor) relationships count",rsrcs:"task-resource relationships count",clndr_id:"calendar id"},Ot={id:"",name:"",type:"Labor / Material (or other software-specific values)",rng:"constraint: [0, max_units_per_day]",dist:"resource distribution (days)",max:"maximum of the distribution (units)",std:"standard deviation of the distribution (units)"},Lt={id:"",name:"",week_hr_cnt:"week hour count"},St={id:"record id",t_id:"task id",r_id:"resource id",work_hr:"total work hour (work_hr = drtn_hr * units)",units:"original units (units = work_hr / drtn_hr)",units_rng:"[min_units, max_units]",units_2:"new units"},Ft={id:"record id",t_id:"task id",p_id:"predecessor task id",type:"one of FS, FF, SS, SF. S = start, F = finish",lag_hr:"lag hour"};function Tt(t){var e=["| Field | Explanation |","| --- | --- |"];return Object.entries(t).forEach((function(t){var r=Object(f.a)(t,2),n=r[0],a=r[1];e.push("| ".concat(n," | ").concat(a," |"))})),e.join("\n")}function Pt(t){var e=t.out;if(!e)return null;var r={get_width:Nt,format:N},n=Object.values(e.inp.tasks);return i.a.createElement(i.a.Fragment,null,i.a.createElement(wt,Object.assign({},r,{rows:n.filter((function(t){return t.changed})),title:"Tasks Changed",keys:Object.keys(kt)}),i.a.createElement(et,null,Tt(jt))),i.a.createElement(wt,Object.assign({},r,{rows:n,title:"Tasks",keys:Object.keys(jt)})),i.a.createElement(wt,Object.assign({},r,{rows:Object.values(e.inp.rsrcs),title:"Resources",keys:Object.keys(Ot)}),i.a.createElement(et,null,Tt(Ot))),i.a.createElement(wt,Object.assign({},r,{rows:Object.values(e.inp.task_rsrcs),title:"Task-Resource Assignments",keys:Object.keys(St)}),i.a.createElement(et,null,Tt(St))),i.a.createElement(wt,Object.assign({},r,{rows:Object.values(e.inp.task_preds),title:"Task-Task (Predecessor) Relationships",keys:Object.keys(Ft)}),i.a.createElement(et,null,Tt(Ft))),i.a.createElement(wt,Object.assign({},r,{rows:Object.values(e.inp.clndrs),title:"Calendars",keys:Object.keys(Lt)}),i.a.createElement(et,null,Tt(Lt))))}function Nt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"name"===t?250:t.includes("start")||t.includes("finish")?150:t.length>8?120:80}function Dt(t){var e=t.values,r=t.value,n=t.onChange;return i.a.createElement(o.a,{style:{flexDirection:"row",flexWrap:"wrap",width:600,maxHeight:150,overflow:"scroll"}},e.map((function(t){return i.a.createElement(W.a,{key:t,onPress:function(){return n(t)}},i.a.createElement(l.a,{style:{margin:5,color:r===t?"blue":"gray",fontWeight:r===t?"bold":void 0}},t))})))}function At(t){var e=t.optimizer,r=t.res_idx,n=t.on_select;return(null===e||void 0===e?void 0:e.results)?i.a.createElement(J,null,i.a.createElement(Y,null,"Optimization Iterations"),i.a.createElement(Dt,{values:e.results.map((function(t,e){return e})),value:r,onChange:n})):null}function Rt(t){var e=t.dic,r=t.title;return e?i.a.createElement(J,null,i.a.createElement(Y,null,r),i.a.createElement("table",null,i.a.createElement("tbody",null,Object.entries(e).map((function(t){var e=Object(f.a)(t,2),r=e[0],n=e[1];return i.a.createElement("tr",{key:r},i.a.createElement("td",null,i.a.createElement(et,null,r)),i.a.createElement("td",{style:{paddingLeft:10,color:"blue"}},n))}))))):null}function Ct(t){var e=t.reader,r=t.optimizer,n=t.res_idx;function a(t){if(r){var e=r.results[t];if(e){var n={"Optimization iteration":t};return Object.keys(st).forEach((function(t){n[st[t]]=N(t,e[t])})),n}}}return i.a.createElement(i.a.Fragment,null,i.a.createElement(Rt,{dic:(null===e||void 0===e?void 0:e.data.tasks)?{Tasks:L(null===e||void 0===e?void 0:e.data.tasks),Resources:L(null===e||void 0===e?void 0:e.data.rsrcs),Calendars:L(null===e||void 0===e?void 0:e.data.clndrs)}:null,title:"Input"}),i.a.createElement(Rt,{dic:a(0),title:"Original design"}),i.a.createElement(Rt,{dic:a(n),title:"New design"}))}function It(t){var e=t.reader,r=t.out;return(null===e||void 0===e?void 0:e.data)&&r?i.a.createElement(J,null,i.a.createElement(Y,null,"Export"),i.a.createElement(U,{on:function(){e.merge_data(r.inp),e.export()}},"Export to original format"),i.a.createElement(U,{on:function(){e.export_excel(r.inp)}},"Export to spreadsheet")):null}function Gt(){Gt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(S){s=function(t,e,r){return t[e]=r}}function l(t,e,r,a){var i=e&&e.prototype instanceof d?e:d,o=Object.create(i.prototype),c=new j(a||[]);return n(o,"_invoke",{value:E(t,r,c)}),o}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(S){return{type:"throw",arg:S}}}t.wrap=l;var f={};function d(){}function h(){}function p(){}var m={};s(m,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(O([])));y&&y!==e&&r.call(y,i)&&(m=y);var g=p.prototype=d.prototype=Object.create(m);function _(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){var a;n(this,"_invoke",{value:function(n,i){function o(){return new e((function(a,o){!function n(a,i,o,c){var s=u(t[a],t,i);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,o,c)}),(function(t){n("throw",t,o,c)})):e.resolve(f).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,c)}))}c(s.arg)}(n,i,a,o)}))}return a=a?a.then(o,o):o()}})}function E(t,e,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var c=b(o,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function b(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var a=u(n,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,f;var i=a.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function O(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:h,configurable:!0}),h.displayName=s(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},_(w.prototype),s(w.prototype,o,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,a,i){void 0===i&&(i=Promise);var o=new w(l(e,r,n,a),i);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},_(g),s(g,c,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=O,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;k(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:O(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}var zt=function(){};function Mt(t){t.name.endsWith("xer")?Et=new I:t.name.endsWith("xml")&&(Et=new R),Et.read_from_file(t).then(Object(d.a)(Gt().mark((function t(){return Gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return bt=new z(Et),t.next=3,bt.init();case 3:zt();case 4:case"end":return t.stop()}}),t)}))))}function Wt(t){xt=t,zt()}function Ut(){var t,e,r=Object(a.useState)(0),n=Object(f.a)(r,2),o=n[0],c=n[1],s={reader:Et,optimizer:bt,res_idx:xt,on_select:Wt,update:zt=function(){return c(o+1)},base:null===(t=bt)||void 0===t?void 0:t.results[0],out:null===(e=bt)||void 0===e?void 0:e.results[xt]};return i.a.createElement(i.a.Fragment,null,i.a.createElement(ft,s),i.a.createElement(K,{tabs:[{name:"Home",elm:i.a.createElement(i.a.Fragment,null,i.a.createElement(B,{on_file:Mt,reader:Et}),i.a.createElement(X,s),i.a.createElement(M,null),i.a.createElement(lt,s),i.a.createElement(M,null),i.a.createElement(ut,s),i.a.createElement(M,null),i.a.createElement(mt,s),i.a.createElement(M,null),i.a.createElement(Ct,s),i.a.createElement(M,null),i.a.createElement(At,s),i.a.createElement(It,s))},{name:"Resources Plots",elm:i.a.createElement(vt,s)},{name:"Distributions",elm:i.a.createElement(gt,s)},{name:"Tables",elm:i.a.createElement(Pt,s)}]}))}function Ht(){return i.a.createElement(o.a,{style:{flex:1}},i.a.createElement(u,null),i.a.createElement(Ut,null),i.a.createElement(c.a,null))}r(283);n.a.registerComponent("App",(function(){return Ht})),n.a.runApplication("App",{rootTag:document.getElementById("root")})}},[[252,1,2]]]);
//# sourceMappingURL=main.ab92df46.chunk.js.map